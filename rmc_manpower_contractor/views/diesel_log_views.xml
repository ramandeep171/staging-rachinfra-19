<?xml version="1.0" encoding="utf-8"?>
<odoo><data>
<record id="view_diesel_log_form" model="ir.ui.view">
<field name="name">rmc.diesel.log.form</field>
<field name="model">rmc.diesel.log</field>
<field name="arch" type="xml">
<form><header>
<button name="action_validate" string="Validate" type="object" class="oe_highlight" invisible="state == 'validated'"/>
<button name="action_reset_to_draft" string="Reset to Draft" type="object" invisible="state == 'draft'"/>
<field name="state" widget="statusbar"/>
</header><sheet>
<group><group>
<field name="name" readonly="1"/>
<field name="agreement_id"/>
<field name="contractor_id" readonly="1"/>
<field name="date"/>
<field name="vehicle_id" context="{'default_agreement_id': agreement_id}"/>
<field name="driver_id" context="{'default_agreement_id': agreement_id}"/>
</group><group>
<field name="opening_ltr"/>
<field name="issued_ltr"/>
<field name="closing_ltr"/>
<field name="work_done_m3"/>
<field name="work_done_km"/>
<field name="diesel_efficiency" readonly="1"/>
<field name="efficiency_unit" readonly="1"/>
</group></group>
<field name="notes"/>
</sheet>
<chatter/>
</form>
</field>
</record>
<record id="view_diesel_log_tree" model="ir.ui.view">
<field name="name">rmc.diesel.log.tree</field>
<field name="model">rmc.diesel.log</field>
<field name="arch" type="xml">
<list decoration-success="state == 'validated'" decoration-warning="state == 'pending_agreement'">
<field name="name"/><field name="date"/><field name="agreement_id"/><field name="vehicle_id"/><field name="driver_id"/><field name="issued_ltr"/><field name="diesel_efficiency"/><field name="efficiency_unit"/><field name="state" widget="badge"/>
</list>
</field>
</record>
        <record id="view_diesel_log_search_rmc" model="ir.ui.view">
            <field name="name">diesel.log.search.rmc</field>
            <field name="model">diesel.log</field>
            <field name="arch" type="xml">
                <search string="Diesel Logs">
                    <field name="name"/>
                    <field name="vehicle_id"/>
                    <field name="driver_id"/>
                    <field name="rmc_agreement_id"/>
                    <field name="company_id"/>
                    <field name="date"/>
                    <filter name="rmc_today" string="Today" domain="[('date', '=', context_today)]"/>
                    <filter name="rmc_linked" string="Linked Agreements" domain="[('rmc_agreement_id', '!=', False)]"/>
                    <separator/>
                    <filter name="rmc_group_by_date" string="Group by Date" context="{'group_by': 'date'}"/>
                    <filter name="rmc_group_by_agreement" string="Group by Agreement" context="{'group_by': 'rmc_agreement_id'}"/>
                    <filter name="rmc_group_by_vehicle" string="Group by Vehicle" context="{'group_by': 'vehicle_id'}"/>
                </search>
            </field>
        </record>

        <record id="action_diesel_log" model="ir.actions.act_window">
            <field name="name">Diesel Logs</field>
            <field name="res_model">diesel.log</field>
            <field name="view_mode">kanban,list,form,pivot,graph</field>
            <field name="domain">[('log_type', '=', 'diesel'), ('rmc_agreement_id', '!=', False)]</field>
            <field name="context">{'default_log_type': 'diesel', 'search_default_rmc_linked': 1, 'search_default_rmc_today': 1}</field>
            <field name="search_view_id" ref="rmc_manpower_contractor.view_diesel_log_search_rmc"/>
        </record>
</data></odoo>
