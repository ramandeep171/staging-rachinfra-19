<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="mail_template_brand_rfq" model="mail.template">
        <field name="name">Brand Subcontractor RFQ</field>
        <field name="model_id" ref="purchase.model_purchase_order"/>
        <field name="subject">RFQ ${object.name or ''}</field>
        <field name="email_from">${(object.company_id.email or user.email_formatted) if user else ''}</field>
        <field name="email_to">${object.partner_id.email or ''}</field>
        <field name="auto_delete" eval="True"/>
        <field name="body_html"><![CDATA[
<div>
    <p>Hello ${object.partner_id.name or 'Partner'},</p>
    <p>
        Please review the request for quotation <strong>${object.name}</strong> for
        ${', '.join(object.order_line.filtered(lambda l: not l.display_type).mapped('product_id.display_name'))}.
    </p>
    <p>
        <a href="${object.env['ir.config_parameter'].sudo().get_param('web.base.url')}/brand/rfq/${object.id}/accept?token=${object._portal_ensure_token()}"
           style="display:inline-block;padding:10px 16px;margin-right:10px;background-color:#28a745;color:#fff;text-decoration:none;border-radius:4px;">
            Accept
        </a>
        <a href="${object.env['ir.config_parameter'].sudo().get_param('web.base.url')}/brand/rfq/${object.id}/reject?token=${object._portal_ensure_token()}"
           style="display:inline-block;padding:10px 16px;background-color:#dc3545;color:#fff;text-decoration:none;border-radius:4px;">
            Reject
        </a>
    </p>
    <p>
        Thank you,<br/>
        ${object.company_id.name}
    </p>
</div>
        ]]></field>
    </record>
</odoo>
