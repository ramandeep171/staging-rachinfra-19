<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_infinys_whatsapp_contact_form" model="ir.ui.view">
            <field name="name">infinys.whatsapp.contact.form</field>
            <field name="model">infinys.whatsapp.contact</field>
            <field name="arch" type="xml">
                <form string="Mailing List Contact">
                    <field name="id" invisible="1"/>
                    <sheet>
                        <div class="oe_title">
                            <label for="name" string="Contact Name"/>
                            <h1>
                                <field class="text-break" name="name" placeholder="e.g. John Smith"/>
                            </h1>
                        </div>
                        <group>
                            <group>
                                <field name="title" placeholder="Title"/>
                                <field name="whatsapp_number" widget="phone" placeholder="Enter WhatsApp Number (628111122233) " required="1"/>
                                <field name="job_position" placeholder="Job Position"/>
                                <field name="email" widget="email" placeholder="Email"/>
                                <field name="description"/>
                            </group>
                            <group>
                                <field name="create_date" placeholder="Created on" readonly="1" invisible="not id"/>
                                <field name="company_name" placeholder="Company Name"/>
                                 <field name="country_id" placeholder="Select Country" required="1" options="{'no_open': True, 'no_create': True}"/> 
                                <field name="mailinglist_ids" widget="many2many_tags" placeholder="Select Mailing Lists" options="{'no_create': True, 'no_open': True}"/>
                                <field name="tags_id" widget="many2many_tags" placeholder="Select Tags"/>
                                <field name="is_new_user" widget="boolean_toggle" string="New User ?"/>
                                <field name="is_active" widget="boolean_toggle" string="Active"/>
                            </group>
                            
                        </group>
                        <notebook>
                            <page string="Incoming History" name="incoming_messages" modifiers="{'invisible': [('incoming_message_ids', '=', [])]}">
                                <field name="incoming_message_ids" widget="one2many_list" readonly="1">
                                    <list edit="popup">
                                        <field name="id"/>
                                        <field name="create_date" string="Received At"/>
                                        <field name="body" string="Message" widget="text" style="white-space: normal; width: 300px;" />  
                                        <field name="hasmedia"/>                       
                                    </list>
                                </field>
                            </page>
                            <page string ="Outgoing History" name="outgoing_messages" modifiers="{'invisible': [('outgoing_message_ids', '=', [])]}">
                                <field name="outgoing_message_ids" widget="one2many_list" readonly="1">
                                    <list edit="popup">
                                        <field name="create_date" string="Received At"/> 
                                        <field name="config_id"/>
                                        <field name="mailing_id"/>
                                        <field name="mailing_list_id"/>
                                        <field name="is_queued" string="Queued"/>
                                        <field name="error_msg" string="Error Message" readonly="1"/>
                                    </list>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_infinys_whatsapp_contact_list" model="ir.ui.view">
            <field name="name">view.infinys.whatsapp.contact.list</field>
            <field name="model">infinys.whatsapp.contact</field>
            <field name="arch" type="xml">
                <list string="Contacts">
                    <field name="full_name"/>
                    <field name="country_id"/>
                    <field name="whatsapp_number"/>
                    <field name="email"/>
                    <field name="company_name"/>
                    <field name="mailinglist_ids" widget="many2many_tags" string="Mailing Lists"/>
                    <field name="tags_id" widget="many2many_tags"/>
                    <field name="total_messages_sent" string="Messages Sent" readonly="1"/>
                    <field name="total_received_messages" string="Received Messages" readonly="1"/>
                    <field name="is_manual" readonly="1" optional="1"/>
                    <field name="is_new_user" />
                    <field name="is_active" optional="1"/>
                    <field name="create_date" optional="1"/>
                    <field name="write_date" optional="1"/>
                </list>
            </field>
        </record>

        <record id="action_infinys_whatsapp_contact" model="ir.actions.act_window">
            <field name="name">Mailing List Contact</field>
            <field name="res_model">infinys.whatsapp.contact</field>
            <field name="view_mode">list,form</field>
        </record>

    </data>
</odoo>
