<odoo>
    <template id="website_layout_location_chip" inherit_id="website.layout" priority="20">
        <xpath expr="//header" position="inside">
            <t t-set="loc_params" t-value="request.env['ir.config_parameter'].sudo()"/>
            <t t-set="loc_enable_ip" t-value="loc_params.get_param('rmc_location.enable_ip_guess', '1')"/>
            <t t-set="loc_enable_gps" t-value="loc_params.get_param('rmc_location.enable_gps', '1')"/>
            <t t-set="loc_cookie_ttl" t-value="loc_params.get_param('rmc_location.cookie_ttl_days', '30')"/>
            <div
                id="rmc_location_chip"
                class="rmc-location-chip"
                t-att-data-default-city="env._('Detecting location‚Ä¶')"
                t-att-data-tooltip-ip="env._('Approximate. Improve using GPS.')"
                t-att-data-enable-ip="loc_enable_ip"
                t-att-data-enable-gps="loc_enable_gps"
                t-att-data-cookie-ttl="loc_cookie_ttl"
            >
                <span class="rmc-location-icon" aria-hidden="true">üìç</span>
                <div class="rmc-location-text" aria-live="polite" aria-atomic="true">
                    <span class="rmc-location-city"><span t-translate="Detecting location‚Ä¶"/></span>
                    <span class="rmc-location-zip"/>
                </div>
                <button
                    type="button"
                    class="rmc-location-change btn btn-link p-0"
                    data-action="rmc-open-modal"
                >
                    <span t-translate="Change"/>
                </button>
                <span class="rmc-location-method-hint text-muted d-none"></span>
            </div>
        </xpath>
        <xpath expr="//body" position="inside">
            <div
                class="modal fade rmc-location-modal"
                id="rmcLocationModal"
                tabindex="-1"
                aria-hidden="true"
                aria-labelledby="rmcLocationModalTitle"
            >
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 id="rmcLocationModalTitle" class="modal-title">
                                <span t-translate="Update delivery location"/>
                            </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"/>
                        </div>
                        <div class="modal-body">
                            <div class="alert alert-warning d-none rmc-location-error" role="alert"/>
                            <form id="rmcLocationModalForm" class="rmc-location-form" autocomplete="off">
                                <div class="mb-3">
                                    <label class="form-label" for="rmcLocationCity">
                                        <span t-translate="City"/>
                                    </label>
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="rmcLocationCity"
                                        name="city"
                                        autocomplete="address-level2"
                                        t-att-placeholder="env._('e.g., Mumbai')"
                                    />
                                </div>
                                <div class="mb-3">
                                    <label class="form-label" for="rmcLocationZip">
                                        <span t-translate="ZIP / Postal code"/>
                                    </label>
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="rmcLocationZip"
                                        name="zip"
                                        autocomplete="postal-code"
                                        t-att-placeholder="env._('e.g., 400001')"
                                    />
                                </div>
                            </form>
                            <p class="text-muted small mb-0">
                                <span t-translate="We use location to show correct prices. You can change anytime."/>
                            </p>
                        </div>
                        <div class="modal-footer">
                            <button
                                type="button"
                                class="btn btn-link text-decoration-none me-auto rmc-location-gps"
                                data-action="use-gps"
                            >
                                <span class="rmc-location-gps-label" t-translate="Use GPS"/>
                            </button>
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                <span t-translate="Cancel"/>
                            </button>
                            <button
                                type="submit"
                                form="rmcLocationModalForm"
                                class="btn btn-primary rmc-location-save"
                            >
                                <span class="rmc-location-save-label" t-translate="Save"/>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <template id="website_sale_checkout_banner" inherit_id="website_sale.checkout_layout" priority="20">
        <xpath expr="//div[contains(@class, 'o_website_sale_checkout_container')]" position="inside">
            <div
                id="rmcLocationBanner"
                class="rmc-location-banner alert alert-info d-none"
                role="status"
                aria-live="polite"
            />
        </xpath>
    </template>
</odoo>
