<?xml version="1.0" encoding="utf-8"?>
<odoo>

        <!-- Top menu item -->
        <menuitem name="Asset Management"
            id="asset_management_main_menu"
            sequence="31" 
            groups="bt_asset_management.group_asset_management_user"/>
        
        <menuitem
            id= "asset_managment_main_submenu"
            parent= "asset_management_main_menu"
            sequence= "1"
            name= "Asset Management"
            /> 
            
        <menuitem
        	id= "asset_managment_main_submenu3"
        	parent= "asset_management_main_menu"
        	sequence= "4"
        	name= "Asset Category"
        	/>     
  
  <!-- Asset View -->          
 		
        <record model="ir.ui.view" id="bt_asset_management_asset_kanban">
            <field name="name">bt.asset.kanban</field>
            <field name="model">bt.asset</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile" create="false">
                    <field name="id"/>
                	<field name="image_1920"/>
                	<field name="name"/>
                	<field name="asset_code"/>
                	<field name="purchase_date"/>
                    <field name="purchase_value"/>
                    <field name="model_name"/>
                    <field name="serial_no"/>
                    
                	<templates>
                        <t t-name="card">
                            <div class="oe_kanban_global_click o_kanban_record_has_image_fill o_res_partner_kanban">
	                            <div class="o_kanban_image o_kanban_content">
	                             	<t t-if="record.image_1920.raw_value">
	                                   <img t-att-src="kanban_image('bt.asset', 'image_1920', record.id.raw_value)" alt="Logo"/>
	                                </t>
	                            </div>  
                                <div class="oe_kanban_details">
                                    <strong class="oe_partner_heading">
                                    	<field name="name"/>
                                    </strong>
                                    <ul>
                                    	<li t-if="record.asset_code.raw_value">Code: <field name="asset_code"/></li>
                                   		<li t-if="record.model_name.raw_value">Model: <field name="model_name"/></li>
                                   		<li t-if="record.serial_no.raw_value">Serial #: <field name="serial_no"/></li>
                                    </ul> 
                                    </div>   
                            </div>
                         </t>
                     </templates>                
                </kanban>
             </field>	
         </record>       
            
        <record id="bt_asset_management_asset_tree" model="ir.ui.view">
            <field name="name">bt.asset.tree</field>
            <field name="model">bt.asset</field>
            <field name="arch" type="xml">
                <list string="Asset" create="false">
                	<field name="name"/>
                	<field name="asset_code"/>
                	<field name="purchase_date"/>
                    <field name="purchase_value"/>
                    <field name="capital_value"/>
                    <field name="maintenance_cost_total"/>
                    <field name="lifecycle_cost_total"/>
                    <field name="current_loc_id"/>
                    <field name="operational_status"/>
                    <field name="custodian_id"/>
                    <field name="model_name"/>
                    <field name="serial_no"/>
                    <field name="manufacturer"/>
                    <field name="warranty_start"/>
                        <field name="warranty_end"/>
                </list>
            </field>
        </record>  
        
        <record id="bt_asset_management_asset_search" model="ir.ui.view">
            <field name="name">bt.asset.search.view</field>
            <field name="model">bt.asset</field>
            <field name="arch" type="xml">
                <search string="Asset">
                    <field name="name"/>
                    <field name="asset_code"/>
                    <field name="purchase_date"/>
                    <field name="purchase_value"/>
                    <field name="capital_value"/>
                    <field name="maintenance_cost_total"/>
                    <field name="lifecycle_cost_total"/>
                    <field name="current_loc_id"/>
                    <field name="operational_status"/>
                    <field name="custodian_id"/>
                    <field name="model_name"/>
                    <field name="serial_no"/>
                    <field name="manufacturer"/>
                    <field name="warranty_start"/>
                    <field name="warranty_end"/>
                    <separator/>
                    <filter name="scrapped" string="Scrapped" domain="[('state','=','scrapped')]"/>
                    <group>
                        <filter name="category" string="Category" context="{'group_by':'category_id'}"/>
                        <filter name="purchasedate" string="Purchase Date" context="{'group_by':'purchase_date'}"/>
                        <filter name="states" string="Status" context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>
        
        
        
        <record id="bt_asset_management_asset_form" model="ir.ui.view">
            <field name="name">bt.asset.form</field>
            <field name="model">bt.asset</field>
            <field name="arch" type="xml">
                <form string="Asset" create="false">
                	<header>
                		<field name="state" widget="statusbar"  statusbar_visible="active,scrapped"/>
                	</header>
                	<sheet>
                        <field name="asset_type" invisible="1"/>
                        <field name="parent_id" invisible="1"/>
                        <field name="account_asset_id" invisible="1"/>
                		<field name="image_1920" widget="image" class="oe_avatar oe_avatar_big" options="{'preview_image': 'image_1920'}"/>
						    <div class="oe_title">
                            	<div class="oe_edit_only">
                                	<label for="name" string="Asset Name"/>
                            	</div>
                                <div class="oe_right oe_button_box">
                                                                        <button name="action_split_quantity" string="Split Qty" type="object" class="btn-secondary" style="height:40px;"/>
                                                                        <button name="action_move_vals" string="Scrap" type="object" class="btn-primary" style="height:40px;" invisible="0"/>
                                    <button name="action_open_maintenance_equipment" type="object" string="Equipment" class="oe_stat_button" icon="fa-wrench" modifiers="{'invisible': [('maintenance_equipment_id', '=', False)]}"/>
                                    <button name="action_open_fleet_vehicle" type="object" string="Vehicle" class="oe_stat_button" icon="fa-car" modifiers="{'invisible': [('fleet_vehicle_id', '=', False)]}"/>
                                                                </div>
                                <h1>
                                        <field name="name"/>
                            	</h1>
                            </div>
                            <group>
                                <group>
                                        <field name="is_created" invisible="1"/>
                                        <field name="asset_code" readonly="1"/>
                                        <field name="category_id"/>
                                        <field name="purchase_date"/>
                                        <field name="model_name"/>
                                        <field name="qty_requested"/>
                                        <field name="maintenance_equipment_id" modifiers="{'readonly': [('maintenance_equipment_id', '!=', False)]}"/>
                                        <field name="fleet_vehicle_id" modifiers="{'readonly': [('fleet_vehicle_id', '!=', False)]}"/>
                                        <field name="custodian_id"/>
                                        <field name="operational_status"/>
                                </group>
                                <group>
                                        <field name="purchase_value"/>
                                        <field name="capital_value" readonly="1"/>
                                        <field name="maintenance_cost_total" readonly="1"/>
                                        <field name="lifecycle_cost_total" readonly="1"/>
                                        <field name="is_created" invisible="1"/>
                                        <field name="current_loc_id" domain="[('usage', '=', 'internal'), ('company_id', 'in', [company_id, False])]" modifiers="{'readonly': [('is_created','=', True)]}"/>
                                        <field name="serial_no"/>
                                </group>
                            	 
                            </group>
                            <notebook>
                                <page string="Components">
                                    <field name="child_ids" context="{'default_asset_type': 'component', 'default_parent_id': id}" mode="list,form">
                                        <list editable="bottom">
                                            <field name="product_id" domain="[('company_id', 'in', [company_id, False])]" context="{'company_id': company_id}" required="1"/>
                                            <field name="name" invisible="1"/>
                                            <field name="component_type"/>
                                            <field name="asset_code" readonly="1"/>
                                            <field name="operational_status"/>
                                            <field name="current_loc_id" domain="[('usage', '=', 'internal'), ('company_id', 'in', [company_id, False])]"/>
                                            <field name="serial_no"/>
                                        </list>
                                        <form string="Component">
                                            <sheet>
                                                <field name="asset_type" invisible="1"/>
                                                <field name="parent_id" invisible="1"/>
                                                <field name="account_asset_id" invisible="1"/>
                                                <group>
                                                    <field name="product_id" domain="[('company_id', 'in', [company_id, False])]" context="{'company_id': company_id}" required="1"/>
                                                    <field name="name" invisible="1"/>
                                                    <field name="component_type"/>
                                                    <field name="asset_code" readonly="1"/>
                                                    <field name="operational_status"/>
                                                </group>
                                                <group>
                                                    <field name="current_loc_id"/>
                                                    <field name="serial_no"/>
                                                    <field name="manufacturer"/>
                                                    <field name="warranty_start"/>
                                                    <field name="warranty_end"/>
                                                </group>
                                                <group>
                                                    <field name="model_name"/>
                                                    <field name="maintenance_equipment_id"/>
                                                    <field name="fleet_vehicle_id"/>
                                                </group>
                                            </sheet>
                                        </form>
                                    </field>
                                </page>
	                            <page string="Warranty">
	                            	<group>
	                            		<field name="manufacturer"/>
	                                </group>
	                                <group>		
	                            		<field name="warranty_start"/>
	                            		<field name="warranty_end"/>
	                            	</group>	
	                            </page>
	                            <page string="Notes">
	                            	<field name="note"/>
	                            </page>
	                        </notebook>    		 
                	 </sheet>
	                    <chatter/>
	                 </form>
             </field>
        </record>

<!-- Asset Category View -->

        <record id="bt_asset_management_asset_category_tree" model="ir.ui.view">
            <field name="name">bt.asset.category.tree</field>
            <field name="model">bt.asset.category</field>
            <field name="arch" type="xml">
                <list string="Asset Category">
                	<field name="name"/>
                </list>
            </field>
        </record> 
        
        <record id="bt_asset_management_asset_category_search" model="ir.ui.view">
            <field name="name">bt.asset.category.search</field>
            <field name="model">bt.asset.category</field>
            <field name="arch" type="xml">
                <search string="Asset Category">
                	<field name="name"/>
                </search>
            </field>
        </record>        
        
        <record id="bt_asset_management_asset_category_form" model="ir.ui.view">
            <field name="name">bt.asset.category.form</field>
            <field name="model">bt.asset.category</field>
            <field name="arch" type="xml">
                <form string="Asset Category">
                	<sheet>
                		<div class="oe_title">
                        	<div class="oe_edit_only">
                            	<label for="name" string="Category Name"/>
                            </div>
                            <h1>
                            	<field name="name"/>
                            </h1>
                        </div>
                        <group>
                                <field name="categ_no"/>
                                <field name="auto_asset_code"/>
                                <field name="code_prefix" invisible="0"/>
                                <field name="code_padding" invisible="0"/>
                                <field name="code_sequence_id" readonly="1" invisible="0"/>
                        </group>
                     </sheet>
                </form>
            </field>
         </record>
        
		<record id="action_bt_asset" model="ir.actions.act_window">
	            <field name="name">Assets</field>
	            <field name="type">ir.actions.act_window</field>
	            <field name="res_model">bt.asset</field>
	            <field name="view_mode">kanban,list,form</field>
                <field name="views" eval="[(ref('bt_asset_management_asset_kanban'), 'kanban'), (ref('bt_asset_management_asset_tree'), 'list'), (ref('bt_asset_management_asset_form'), 'form')]"/>
	            <field name="search_view_id" ref="bt_asset_management_asset_search"/>
	            <field name="help" type="html">
	                <p class="oe_view_nocontent_create">
	                    Create Asset for the company
	                </p>
	            </field>
	        </record>
        
	        <menuitem action="action_bt_asset" name="Asset"
	            id="menu_action_bt_asset" parent="asset_managment_main_submenu"
	            sequence="12"/>
	            
	   <record id="action_bt_asset_category" model="ir.actions.act_window">
	            <field name="name">Asset Category</field>
	            <field name="type">ir.actions.act_window</field>
	            <field name="res_model">bt.asset.category</field>
	            <field name="view_mode">list,form</field>
                <field name="views" eval="[(ref('bt_asset_management_asset_category_tree'), 'list'), (ref('bt_asset_management_asset_category_form'), 'form')]"/>
	            <field name="search_view_id" ref="bt_asset_management_asset_category_search"/>
	            <field name="help" type="html">
	                <p class="oe_view_nocontent_create">
	                    Create Asset Category for the Company
	                </p>
	            </field>
	        </record>
           
      <menuitem action="action_bt_asset_category" name="Asset Category"
	            id="menu_action_bt_asset_category" parent="asset_managment_main_submenu"
	            sequence="14"/> 
	            
</odoo>
	
