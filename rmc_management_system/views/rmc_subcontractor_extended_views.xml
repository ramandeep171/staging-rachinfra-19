<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Plant Views -->
    <record id="view_rmc_subcontractor_plant_list" model="ir.ui.view">
        <field name="name">rmc.subcontractor.plant.list</field>
        <field name="model">rmc.subcontractor.plant</field>
        <field name="arch" type="xml">
            <list>
                <field name="plant_code"/>
                <field name="location"/>
                <field name="capacity"/>
                <field name="contact_person"/>
                <field name="contact_mobile"/>
                <field name="operator_portal_email"/>
                <field name="operator_portal_enabled"/>
                <field name="active"/>
            </list>
        </field>
    </record>

    <record id="view_rmc_subcontractor_plant_form" model="ir.ui.view">
        <field name="name">rmc.subcontractor.plant.form</field>
        <field name="model">rmc.subcontractor.plant</field>
        <field name="arch" type="xml">
            <form string="Subcontractor Plant">
                <header>
                    <button name="action_sync_operator_portal_user" type="object" string="Sync Portal Access" class="btn-primary" modifiers="{'invisible': [('operator_portal_email', '=', False)]}"/>
                    <button name="action_disable_operator_portal" type="object" string="Disable Portal" modifiers="{'invisible': [('operator_portal_email', '=', False)]}"/>
                </header>
                <sheet>
                    <group>
                        <group string="Plant Details">
                                        <field name="plant_code"/>
                                        <field name="location"/>
                                        <field name="address"/>
                                        <field name="geo_location"/>
                                        <field name="capacity"/>
                                        <field name="active"/>
                        </group>
                        <group string="Contact Information">
                            <field name="contact_person"/>
                            <field name="contact_mobile"/>
                            <!-- contact_email field removed: not present in model -->
                        </group>
                    </group>
                    <group string="BOM Recipes">
                        <field name="bom_ids" widget="many2many_tags" 
                               domain="[('product_tmpl_id', '!=', False)]"/>
                    </group>
                    <group string="Portal Access">
                        <field name="operator_portal_email"/>
                        <field name="operator_portal_password"/>
                        <field name="operator_portal_enabled"/>
                        <field name="operator_user_id" readonly="1"/>
                        <field name="operator_portal_last_login" readonly="1"/>
                    </group>
                    <notebook>
                        <page string="Day Reports">
                            <field name="day_report_ids" context="{'default_plant_id': id, 'default_operator_user_id': operator_user_id}" readonly="1">
                                <list>
                                    <field name="report_date"/>
                                    <field name="operator_user_id"/>
                                    <field name="total_jobs"/>
                                    <field name="completed_jobs"/>
                                    <field name="pending_jobs"/>
                                    <field name="total_quantity"/>
                                </list>
                                <form>
                                    <sheet>
                                        <group>
                                            <field name="name" readonly="1"/>
                                            <field name="plant_id" readonly="1"/>
                                            <field name="operator_user_id" readonly="1"/>
                                            <field name="report_date" readonly="1"/>
                                        </group>
                                        <group>
                                            <field name="total_jobs" readonly="1"/>
                                            <field name="completed_jobs" readonly="1"/>
                                            <field name="pending_jobs" readonly="1"/>
                                            <field name="total_quantity" readonly="1"/>
                                        </group>
                                        <group>
                                            <field name="remarks" readonly="1"/>
                                        </group>
                                        <field name="docket_ids" readonly="1" widget="many2many_tags"/>
                                    </sheet>
                                </form>
                            </field>
                        </page>
                    </notebook>
                    <!-- notes field removed: not present in model -->
                </sheet>
            </form>
        </field>
    </record>

    <!-- Transport Views -->
    <record id="view_rmc_subcontractor_transport_list" model="ir.ui.view">
        <field name="name">rmc.subcontractor.transport.list</field>
        <field name="model">rmc.subcontractor.transport</field>
        <field name="arch" type="xml">
            <list>
                <field name="transport_code"/>
                <field name="plant_id"/>
                <field name="vehicle_type"/>
                <field name="license_plate"/>
                <field name="driver_name"/>
                <field name="driver_mobile"/>
                <field name="jobs_completed"/>
                <field name="jobs_today"/>
                <field name="efficiency_score"/>
                <field name="active"/>
            </list>
        </field>
    </record>

    <record id="view_rmc_subcontractor_transport_form" model="ir.ui.view">
        <field name="name">rmc.subcontractor.transport.form</field>
        <field name="model">rmc.subcontractor.transport</field>
        <field name="arch" type="xml">
            <form string="Subcontractor Transport">
                <sheet>
                    <group>
                        <group string="Transport Details">
                            <field name="transport_code"/>
                                <field name="plant_id"/>
                            <field name="vehicle_type"/>
                            <field name="fleet_vehicle_id"/>
                            <field name="license_plate"/>
                            <field name="active"/>
                        </group>
                        <group string="Driver Information">
                            <field name="driver_name"/>
                            <field name="driver_mobile"/>
                            <!-- driver_email field removed: not present in model -->
                        </group>
                    </group>
                    <group string="Performance Snapshot">
                        <field name="jobs_completed" readonly="1"/>
                        <field name="jobs_today" readonly="1"/>
                        <field name="efficiency_score" readonly="1"/>
                        <field name="fuel_consumed_litres" readonly="1"/>
                        <field name="fuel_cost_total" readonly="1"/>
                    </group>
                    <notebook>
                        <page string="Fuel Logs">
                            <field name="fuel_log_ids" context="{'default_transport_id': id}" nolabel="1">
                                <list editable="bottom">
                                    <field name="log_date"/>
                                    <field name="litre_count"/>
                                    <field name="cost_amount"/>
                                    <field name="driver_id"/>
                                    <field name="note"/>
                                </list>
                            </field>
                        </page>
                        <page string="Documents">
                            <field name="document_ids" context="{'default_transport_id': id}" nolabel="1">
                                <list editable="bottom">
                                    <field name="name"/>
                                    <field name="document_type"/>
                                    <field name="expiry_date"/>
                                    <field name="days_to_expiry" readonly="1"/>
                                    <field name="reminder_days"/>
                                    <field name="is_expired" readonly="1"/>
                                </list>
                                <form string="Transport Document">
                                    <sheet>
                                        <group>
                                            <field name="name"/>
                                            <field name="document_type"/>
                                            <field name="expiry_date"/>
                                            <field name="reminder_days"/>
                                            <field name="days_to_expiry" readonly="1"/>
                                            <field name="is_expired" readonly="1"/>
                                        </group>
                                        <group>
                                            <field name="attachment_id" filename="attachment_filename"/>
                                            <field name="attachment_filename" invisible="1"/>
                                            <field name="note"/>
                                        </group>
                                    </sheet>
                                </form>
                            </field>
                        </page>
                        <page string="Dockets" modifiers="{'invisible': [['docket_ids', '=', False]]}">
                            <field name="docket_ids" readonly="1" nolabel="1">
                                <list>
                                    <field name="name"/>
                                    <field name="docket_date"/>
                                    <field name="quantity_ordered"/>
                                    <field name="quantity_produced"/>
                                    <field name="state"/>
                                    <field name="operator_portal_status"/>
                                </list>
                            </field>
                        </page>
                    </notebook>
                    <!-- notes field removed: not present in model -->
                </sheet>
            </form>
        </field>
    </record>

    <!-- Pump Views -->
    <record id="view_rmc_subcontractor_pump_list" model="ir.ui.view">
        <field name="name">rmc.subcontractor.pump.list</field>
        <field name="model">rmc.subcontractor.pump</field>
        <field name="arch" type="xml">
            <list>
                <field name="pump_code"/>
                <field name="plant_id"/>
                <field name="pump_capacity"/>
                <field name="operator_name"/>
                <field name="operator_mobile"/>
                <field name="active"/>
            </list>
        </field>
    </record>

    <record id="view_rmc_subcontractor_pump_form" model="ir.ui.view">
        <field name="name">rmc.subcontractor.pump.form</field>
        <field name="model">rmc.subcontractor.pump</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group string="Pump Details">
                            <field name="pump_code"/>
                            <field name="plant_id"/>
                            <field name="pump_capacity"/>
                            <field name="active"/>
                        </group>
                        <group string="Operator Information">
                            <field name="operator_name"/>
                            <field name="operator_mobile"/>
                            <!-- <field name="operator_email"/> -->
                        </group>
                    </group>
                    <!-- <field name="notes"/> -->
                </sheet>
            </form>
        </field>
    </record>
</odoo>
