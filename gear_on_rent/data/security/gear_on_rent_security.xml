<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <data noupdate="1">
    <record id="module_category_gear_on_rent" model="ir.module.category">
      <field name="name">Gear On Rent</field>
      <field name="sequence">18</field>
    </record>

    <record id="privilege_gear_on_rent" model="res.groups.privilege">
      <field name="name">Gear On Rent</field>
    </record>

    <record id="group_gear_on_rent_user" model="res.groups">
      <field name="name">Gear On Rent User</field>
      <field name="privilege_id" ref="gear_on_rent.privilege_gear_on_rent"/>
    </record>

    <record id="group_gear_on_rent_manager" model="res.groups">
      <field name="name">Gear On Rent Manager</field>
      <field name="privilege_id" ref="gear_on_rent.privilege_gear_on_rent"/>
      <field name="implied_ids" eval="[(4, ref('gear_on_rent.group_gear_on_rent_user'))]"/>
    </record>

    <record id="group_gear_on_rent_portal" model="res.groups">
      <field name="name">Gear On Rent Portal</field>
      <field name="privilege_id" ref="gear_on_rent.privilege_gear_on_rent"/>
      <field name="implied_ids" eval="[(4, ref('base.group_portal'))]"/>
    </record>

    <record id="rule_ngt_user_company" model="ir.rule">
      <field name="name">NGT user company access</field>
      <field name="model_id" ref="gear_on_rent.model_gear_ngt_request"/>
      <field name="domain_force">[('company_id', 'in', user.company_ids.ids)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_user'))]"/>
    </record>

    <record id="rule_loto_user_company" model="ir.rule">
      <field name="name">LOTO user company access</field>
      <field name="model_id" ref="gear_on_rent.model_gear_loto_request"/>
      <field name="domain_force">[('company_id', 'in', user.company_ids.ids)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_user'))]"/>
    </record>

    <record id="rule_ngt_portal_partner" model="ir.rule">
      <field name="name">NGT portal access</field>
      <field name="model_id" ref="gear_on_rent.model_gear_ngt_request"/>
      <field name="domain_force">[('so_id.partner_id', 'child_of', user.partner_id.commercial_partner_id.id)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_portal'))]"/>
    </record>

    <record id="rule_loto_portal_partner" model="ir.rule">
      <field name="name">LOTO portal access</field>
      <field name="model_id" ref="gear_on_rent.model_gear_loto_request"/>
      <field name="domain_force">[('so_id.partner_id', 'child_of', user.partner_id.commercial_partner_id.id)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_portal'))]"/>
    </record>

    <record id="rule_rmc_log_user_company" model="ir.rule">
      <field name="name">RMC docket user company access</field>
      <field name="model_id" ref="gear_on_rent.model_gear_rmc_docket"/>
      <field name="domain_force">[('company_id', 'in', user.company_ids.ids)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_user'))]"/>
    </record>

    <record id="rule_rmc_log_portal_partner" model="ir.rule">
      <field name="name">RMC docket portal access</field>
      <field name="model_id" ref="gear_on_rent.model_gear_rmc_docket"/>
      <field name="domain_force">[('so_id.partner_id', 'child_of', user.partner_id.commercial_partner_id.id)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_portal'))]"/>
    </record>

    <record id="rule_rmc_monthly_order_user_company" model="ir.rule">
      <field name="name">RMC monthly order user company access</field>
      <field name="model_id" ref="gear_on_rent.model_gear_rmc_monthly_order"/>
      <field name="domain_force">[('company_id', 'in', user.company_ids.ids)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_user'))]"/>
    </record>

    <record id="rule_rmc_monthly_order_portal_partner" model="ir.rule">
      <field name="name">RMC monthly order portal access</field>
      <field name="model_id" ref="gear_on_rent.model_gear_rmc_monthly_order"/>
      <field name="domain_force">[('so_id.partner_id', 'child_of', user.partner_id.commercial_partner_id.id)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_portal'))]"/>
    </record>

    <record id="rule_rmc_annual_reconciliation_user_company" model="ir.rule">
      <field name="name">Annual reconciliation user company access</field>
      <field name="model_id" ref="gear_on_rent.model_gear_rmc_annual_reconciliation"/>
      <field name="domain_force">[('company_id', 'in', user.company_ids.ids)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_user'))]"/>
    </record>

    <record id="rule_rmc_annual_reconciliation_portal_partner" model="ir.rule">
      <field name="name">Annual reconciliation portal access</field>
      <field name="model_id" ref="gear_on_rent.model_gear_rmc_annual_reconciliation"/>
      <field name="domain_force">[('so_id.partner_id', 'child_of', user.partner_id.commercial_partner_id.id)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_portal'))]"/>
    </record>

    <record id="rule_gear_reason_company" model="ir.rule">
      <field name="name">Reason company access</field>
      <field name="model_id" ref="gear_on_rent.model_gear_reason"/>
      <field name="domain_force">[('company_id', 'in', user.company_ids.ids)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_user')), (4, ref('gear_on_rent.group_gear_on_rent_manager'))]"/>
    </record>

    <!-- Batching-plant quotation portal visibility -->
    <record id="rule_batching_quote_portal_partner" model="ir.rule">
      <field name="name">Batching quotation portal access</field>
      <field name="model_id" ref="sale.model_sale_order"/>
      <field name="domain_force">[('x_billing_category', '=', 'plant'), ('partner_id', 'child_of', user.partner_id.commercial_partner_id.id)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_portal'))]"/>
      <field name="perm_read" eval="True"/>
      <field name="perm_write" eval="False"/>
      <field name="perm_create" eval="False"/>
      <field name="perm_unlink" eval="False"/>
    </record>

    <!-- Internal user read-only controls for batching masters -->
    <record id="rule_batching_mgq_rate_user_readonly" model="ir.rule">
      <field name="name">MGQ rate user readonly</field>
      <field name="model_id" ref="gear_on_rent.model_gear_mgq_rate_master"/>
      <field name="domain_force">[('company_id', 'in', user.company_ids.ids)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_user'))]"/>
      <field name="perm_read" eval="True"/>
      <field name="perm_write" eval="False"/>
      <field name="perm_create" eval="False"/>
      <field name="perm_unlink" eval="False"/>
    </record>

    <record id="rule_batching_optional_service_user_readonly" model="ir.rule">
      <field name="name">Optional services user readonly</field>
      <field name="model_id" ref="gear_on_rent.model_gear_optional_service_master"/>
      <field name="domain_force">[('company_id', 'in', user.company_ids.ids)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_user'))]"/>
      <field name="perm_read" eval="True"/>
      <field name="perm_write" eval="False"/>
      <field name="perm_create" eval="False"/>
      <field name="perm_unlink" eval="False"/>
    </record>

    <record id="rule_batching_material_area_user_readonly" model="ir.rule">
      <field name="name">Material area user readonly</field>
      <field name="model_id" ref="gear_on_rent.model_gear_material_area_master"/>
      <field name="domain_force">[('company_id', 'in', user.company_ids.ids)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_user'))]"/>
      <field name="perm_read" eval="True"/>
      <field name="perm_write" eval="False"/>
      <field name="perm_create" eval="False"/>
      <field name="perm_unlink" eval="False"/>
    </record>

    <!-- Manager overrides for batching masters -->
    <record id="rule_batching_mgq_rate_manager" model="ir.rule">
      <field name="name">MGQ rate manager access</field>
      <field name="model_id" ref="gear_on_rent.model_gear_mgq_rate_master"/>
      <field name="domain_force">[('company_id', 'in', user.company_ids.ids)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_manager'))]"/>
      <field name="perm_read" eval="True"/>
      <field name="perm_write" eval="True"/>
      <field name="perm_create" eval="True"/>
      <field name="perm_unlink" eval="True"/>
    </record>

    <record id="rule_batching_optional_service_manager" model="ir.rule">
      <field name="name">Optional services manager access</field>
      <field name="model_id" ref="gear_on_rent.model_gear_optional_service_master"/>
      <field name="domain_force">[('company_id', 'in', user.company_ids.ids)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_manager'))]"/>
      <field name="perm_read" eval="True"/>
      <field name="perm_write" eval="True"/>
      <field name="perm_create" eval="True"/>
      <field name="perm_unlink" eval="True"/>
    </record>

    <record id="rule_batching_material_area_manager" model="ir.rule">
      <field name="name">Material area manager access</field>
      <field name="model_id" ref="gear_on_rent.model_gear_material_area_master"/>
      <field name="domain_force">[('company_id', 'in', user.company_ids.ids)]</field>
      <field name="groups" eval="[(4, ref('gear_on_rent.group_gear_on_rent_manager'))]"/>
      <field name="perm_read" eval="True"/>
      <field name="perm_write" eval="True"/>
      <field name="perm_create" eval="True"/>
      <field name="perm_unlink" eval="True"/>
    </record>

  </data>
</odoo>
